<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">DfnityCity</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;

  mashiro_option.cookie_version_control = "";

  mashiro_option.site_name = "DfinityCity";
  mashiro_option.author_name = "City";
  mashiro_option.site_url = "http://www.dfinitycity.ml";

  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "/images/cover/01.png,https://imgur.com/QX9eklL.png".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('My friend, Internet Explorer doesnt work~');
  }
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SFGK97BGSG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SFGK97BGSG');
</script>
  
  
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
<meta name="generator" content="Hexo 6.0.0"></head>

<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
		<h1 class="center-text glitch is-glitching Ubuntu-font" data-text="Welcome to ICity ">Welcome to ICity </h1>
      <div class="header-info">
        <p><i class="fa fa-quote-left"></i> Build your internet life from ICity! <i class="fa fa-quote-right"></i></p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/dfinitycity" target="_blank" class="social-github" title="github">
                    <img src="/images/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://twitter.com/DfinityCity" target="_blank" class="social-github" title="twitter">
                    <img src="/images/social/twitter.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://discord.gg/8wXdqTeHeq" target="_blank" class="social-github" title="discord">
                    <img src="/images/social/discord.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://az5sd-cqaaa-aaaae-aaarq-cai.ic0.app/u/DfinityCity" target="_blank" class="social-github" title="distrikt">
                    <img src="/images/social/distrikt.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="/" target="_blank" class="social-github" title="medium">
                    <img src="/images/social/medium.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">Dfinity</span>
            <span class="shironeko">City</span>
          </a>
        </span>
      </span>
    </div>
	<div class="search-form-submit header-user-avatar">
      <img class="faa-shake animated-hover" src="https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.9/img/Sakura/images/none.png" width="30" height="30">
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    Index
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-vertical" aria-hidden="true"></i>
                    Art
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/art/gallery/">
                          <i class="fa " aria-hidden="true"></i>
                          Gallery
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          Analysis
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    ICmoe
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/icmoe/collection/">
                          <i class="fa " aria-hidden="true"></i>
                          Collec-tion
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          About
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-shake" aria-hidden="true"></i>
                    ICity
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/city/mycity/">
                          <i class="fa " aria-hidden="true"></i>
                          My-city
                        </a>
                      </li>
                    
                      <li>
                        <a target="_blank" rel="noopener" href="https://qb5bx-iyaaa-aaaai-abmna-cai.ic0.app/">
                          <i class="fa " aria-hidden="true"></i>
                          Land
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          Stake
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          About
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o  faa-tada" aria-hidden="true"></i>
                    Update
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          Time-line
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          Road-map
                        </a>
                      </li>
                    
                      <li>
                        <a href="javascript:;">
                          <i class="fa " aria-hidden="true"></i>
                          About-us
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/portals/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    Portal
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

        <div class="pattern-center-blank"></div>
  
  <div id="content" class="site-content">
    <article class="post-item post-301 page type-page status-publish has-post-thumbnail hentry">
      <!DOCTYPE html><html><head>
<style>
* {
    box-sizing: border-box;
}
html,
body {
    width: 100%;
    height: 100%;
    font-size: 100%;
    font-family: 'Montserrat', sans-serif;
}
body {
    margin: 0;
    overflow: hidden;
}
body[data-label="true"] .labels {
    display: block;
}
button#export {
    padding: 10px;
    width: 100%;
    margin-bottom: 10px;
    background: #49C5FC;
    border: 0;
    color: #fff;
    text-transform: uppercase;
}
.row,
.options {
    margin: 10px 0;
    display: table-cell;
    vertical-align: top;
    padding: 10px;
    min-width: 200px;
}
div#info {
    min-height: 50px;
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    font-size: 12px;
    padding: 10px;
}
div#info span {
    display: block;
}
.infoRow {
    position: absolute;
    z-index: 2;
    right: 0;
    top: 0;
    background: rgba(255, 255, 255, 0.6);
}
.infoRow button {
    display: block;
    width: 50%;
    border: 0;
    float: left;
    height: 50px;
}
.infoRow button:hover {
    background: rgba(0, 0, 0, 0.5);
    color: #eee;
}
.infoRow button:active {
    background: rgba(0, 0, 0, 0.95);
}
.labels {
    position: absolute;
    z-index: 99;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
}
.label {
    top: 0;
    left: 0;
    z-index: 1;
    color: #eee;
    font-size: 80%;
    -webkit-transform-origin: 0 0;
    transform-origin: 0 0;
    display: inline-block;
    position: absolute;
}
div.infoHolder {
    position: absolute;
    z-index: 999;
    background: rgba(255, 255, 255, 0.5);
    padding: 10px;
    bottom: 0;
    width: 100%;
    height: 200px;
}
.single_option {
    display: inline-block;
    width: 43px;
    height: 43px;
    padding: 0px;
    color: #eee;
    margin: 1px;
    border: 0;
    background: rgba(0, 0, 0, 0.2);
    text-indent: 999px;
    overflow: hidden;
    position: relative;
}
.single_option img {
    position: absolute;
    display: block;
    width: 80%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto;
}
.single_option:hover {
    background: rgba(0, 0, 0, 0.5);
}
.single_option:hover img {
    -webkit-transform: scale(1.2);
    transform: scale(1.2);
}
.single_option:after {
    content: '';
    display: table;
    width: 100%;
    clear: both;
}
.single_option img {
    -webkit-transition-duration: .15s;
    transition-duration: .15s;
    width: 35px;
    display: inline-block;
    float: left;
    margin-right: 5px;
}
div#backgroundHolder {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    padding-bottom: 200px;
    height: 100%;
}
</style>
</head>
<body>
<script type="text/javascript" src="https://wow.techbrood.com/libs/three.r73.js"></script><div class="infoRow">
    <div id="info"></div>
    <div class="row">
        <button id="rot-90-neg">rotate -90°</button>
        <button id="rot-90-pos">rotate 90°</button>
    </div>
</div>
<div id="infoHolder" class="infoHolder">

    <div class="row">
        <button id="export">export as json</button>
    </div>


</div>
<div id="backgroundHolder"></div>

<script src='https://wow.techbrood.com/uploads/150501/OrbitControls.js'></script>
<script src='https://wow.techbrood.com/uploads/1703/learning-three-js-2e/libs/Tween.js'></script>
<script src='https://wow.techbrood.com/uploads/160301/adjust.min_copy.js'></script>
<script>
/*
    Basic Setup
*/
//(function(){

//__________ Variables
(function(console) {

    console.save = function(data, filename) {

        if (!data) {
            console.error('Console.save: No data')
            return;
        }

        if (!filename) filename = 'console.json'

        if (typeof data === "object") {
            data = JSON.stringify(data, undefined, 4)
        }

        var blob = new Blob([data], {
                type: 'text/json'
            }),
            e = document.createEvent('MouseEvents'),
            a = document.createElement('a')

        a.download = filename
        a.href = window.URL.createObjectURL(blob)
        a.dataset.downloadurl = ['text/json', a.download, a.href].join(':')
        e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)
        a.dispatchEvent(e)
    }
})(console);

function baseObj(type, coor, rot) {
    return {
        obj: type,
        coor: coor,
        rot: rot,
    }
}

function loadJSON(url, callback) {

    var xobj = new XMLHttpRequest();
    xobj.overrideMimeType("application/json");
    xobj.open('GET', url, true); // Replace 'my_data' with the path to your file
    xobj.onreadystatechange = function() {
        if (xobj.readyState == 4 && xobj.status == "200") {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            callback(JSON.parse(xobj.responseText));
        }
    };
    xobj.send(null);
}
var dimension = 10;
var offset = 1;
var time = 0;
var manager = new THREE.LoadingManager();
var loader = new THREE.JSONLoader(manager);

/////////////////////////////////////////////////////////////////////////// URLs

var base_url = 'https://wow.techbrood.com/uploads/160301/';
var base_url_ico = 'https://wow.techbrood.com/uploads/160301/';
var base_url_scenes = 'https://wow.techbrood.com/uploads/160301/';


var backHolder = document.getElementById('backgroundHolder');

/////////////////////////////////////////////////////////////////////////// 
var main_color = 0x000000;


var canvas_width = backHolder.offsetWidth;
var canvas_height = backHolder.offsetHeight;

/////////////////////////////////////////////////////////////////////////// UI
var infoBox = document.getElementById('info');
var infoHolder = document.getElementById('infoHolder');

infoHolder.addEventListener('mouseover', function() {
    Adjust.disableMouse = true;
    // alert();
});

infoHolder.addEventListener('mouseout', function() {
    Adjust.disableMouse = false;
    // alert();
})
var exportButton = document.getElementById('export');

exportButton.addEventListener('click', function() {
    console.save(places);
})

var rotatePos = document.getElementById('rot-90-pos');
var rotateNeg = document.getElementById('rot-90-neg');


function rotateMesh(el, dir) {
    var rotateTarget = (el.info.rot + dir);
    if (rotateTarget == 360) {
        rotateTarget = 0;
    }
    if (rotateTarget < 0) {
        rotateTarget = 360
    }

    el.rotation.y = rotateTarget * Math.PI / 180;
    el.info.rot = rotateTarget;
    console.log('target:', places[el.info.coor]);
    places[el.info.coor].rot = rotateTarget;
    el.updateMatrix();
    el.matrixAutoUpdate = false;

    infoBox.innerHTML = '<span>ID: ' + el.info.coor + '</span><span>Type: ' + el.info.obj + '</span><span>rotation: ' + el.info.rot + '</span>';

}

rotatePos.addEventListener('click', function() {
    if (global.selected != null) {
        rotateMesh(global.selected, 90)
    }
});
rotateNeg.addEventListener('click', function() {
    if (global.selected != null) {
        rotateMesh(global.selected, -90)
    }

});


/////////////////////////////////////////////////////////////////////////// Loader
manager.onProgress = function(item, loaded, total) {

    // console.log( item, loaded, total );

};

manager.onLoad = function(item, loaded, total) {

    //console.log( 'ready' );
    generateCity();
};

/////////////////////////////////////////////////////////////////////////// Helper Functions

function randomRotation() {
    var rot = [0, 90, 180, 270]

    return rot[Math.ceil(Math.random() * (rot.length - 1))];
}


///////////////////// Load Mesh
function loadTile(name) {
    var tileName = name;
    loader.load(base_url + name + '.json', function(geometry, material) {

        material.forEach(function(m, index) {
            m.shading = THREE.FlatShading
        })
        global.models[tileName] = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(material));
        global.models[tileName].name = tileName;
    });
}


///////////////////// Text label

function createLabel(name, cont) {
        var el = document.createElement('div');
        el.dataset.label = name;
        el.classList.add('label');
        el.innerHTML = cont;

        return el;
    }
    ///////////////////// Grid Coordinates

function createGrid(dim, offset) {
    var gridPos = [];
    for (var z = 0; z < dim; z++) {
        for (var x = 0; x < dim; x++) {
            gridPos.push({
                x: -(dim / 2 * offset) + x * offset,
                z: -(dim / 2 * offset) + z * offset,
                empty: true
            })
        }
    }

    return gridPos;

}


/////////////////////////////////////////////////////////////////////////// Globale Options

var global = {
        ready: false,
        models: {},
        selected: null
    }
    /////////////////////////////////////////////////////////////////////////// Setup


//__________ scene
var scene = new THREE.Scene();

//__________ camera
var camera = new THREE.PerspectiveCamera(55, canvas_width / canvas_height, 0.1, 1000);

camera.position.set(0, 20, 20);

scene.add(camera);
//__________ renderer

var renderer = new THREE.WebGLRenderer({
    alpha: true,
    antialias: true
}); /// { alpha: true }
renderer.setSize(canvas_width, canvas_height);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
renderer.setClearColor(main_color, 1);

backHolder.appendChild(renderer.domElement);






/////////////////////////////////////////////////////////////////////////// MESHES TO LOAD

var tiles = [
    'gras_copy',

    //Street

    'street',
    'corner',
    'cross',

    //Wood
    'wood_full',
    'wood_half',

    //River
    'river',
    'water',
    'water_half',
    'water_corner',
    'water_small_corner',
    'water_corner_inside',
    'water_quarter',
    'water_s',
    'water_island_1',

    //Buildings
    'house',
    'single_cross',
    'house_large',
    'power_1',

]

/////////////////////////////////////////////////////////////////////////// LOAD MESHES
var places = [];
///////////////////////////////////// Scenes first then all meshes
loadJSON(base_url_scenes + 'scene_2.json', function(data) {
    console.log(data);

    places = data;

    tiles.forEach(function(t, index) {
        loadTile(t);
    });


});




/////////////////////////////////////////////////////////////////////////// CREATE LABELS


function switchElement(el, type) {
    //console.log(el.info,type)
    places[el.info.coor] = baseObj(type, el.info.coor, 0);

    var mesh = global.models[type].clone();
    mesh.position.x = gridPositions[el.info.coor].x;
    mesh.position.z = gridPositions[el.info.coor].z;

    gridPositions[el.info.coor].empty = false;

    mesh.name = el.info.coor;
    mesh.selected = false;

    mesh.info = el.info;


    mesh.rotation.y = el.info.rot * Math.PI / 180;

    mesh.updateMatrix();
    mesh.matrixAutoUpdate = false;
    mesh.castShadow = true;
    mesh.receiveShadow = true;
    scene.add(mesh);

    var ol_index = Adjust.objects.indexOf(el);
    Adjust.objects[ol_index] = mesh;

    //console.log(Adjust.objects.indexOf(el));


    //remove old one
    scene.remove(el);
    //set new one
    global.selected = null;
}


/////////////////////////////////////////////////////////////////////////// Buttons

function createOptions(name) {
    var el = document.createElement('button');
    var elSpan = document.createElement('span');
    var elImg = document.createElement('img');
    elImg.src = base_url_ico + name + '.png';
    el.dataset.type = name;
    el.classList.add('single_option');
    elSpan.innerHTML = name;
    el.appendChild(elSpan);
    el.appendChild(elImg);
    el.addEventListener('click', function() {

        // console.log('click,', global.selected.info.coor,this.dataset.type);
        if (global.selected != null) {
            switchElement(global.selected, this.dataset.type)
        }

    })
    return el;
}

//////////////////////////////// Events for Meshes
/////////////////////////////////Mouseover
function over(el) {

        if (global.lastMaterial == null) {
            global.lastMaterial = el.material;
            el.material = new THREE.MeshPhongMaterial({
                color: 0xaaaaaa,
                shading: THREE.FlatShading
            });
        }



    }
    /////////////////////////////////Mouseout

function out(el) {

        el.material = global.lastMaterial;

        global.lastMaterial = null;
    }
    /////////////////////////////////Mousedown

function activeState(el) {
    //console.log(el.position);

    new TWEEN.Tween(controls.target)
        .to({
            x: el.position.x,
            z: el.position.z
        }, 1000).start();

    if (global.selected === el) {

        el.position.y = 0;
        el.updateMatrix();
        el.matrixAutoUpdate = false;
        el.selected = false;
        global.selected = null;
        infoBox.innerHTML = '';
    } else {
        if (global.selected != null) {
            //reset selected
            global.selected.position.y = 0;
            global.selected.updateMatrix();
            global.selected.matrixAutoUpdate = false;
            global.selected.selected = false;
            infoBox.innerHTML = '';
        }
        //console.log('not the same');

        el.selected = true;
        global.selected = el;
        el.position.y = .1;
        el.updateMatrix();
        el.matrixAutoUpdate = false;
        infoBox.innerHTML = '<span>ID: ' + el.info.coor + '</span><span>Type: ' + el.info.obj + '</span><span>rotation: ' + el.info.rot + '</span>';
    }


    //console.log(el.info);
}


///////////////////////////////// City generator
function addSingleTile(opt) {

    var mesh = global.models[opt.obj].clone();
    mesh.position.x = gridPositions[opt.coor].x;
    mesh.position.z = gridPositions[opt.coor].z;

    gridPositions[opt.coor].empty = false;

    mesh.name = opt.coor;
    mesh.selected = false;

    mesh.info = opt;


    mesh.rotation.y = opt.rot * Math.PI / 180;

    mesh.updateMatrix();
    mesh.matrixAutoUpdate = false;
    mesh.castShadow = true;
    mesh.receiveShadow = true;
    scene.add(mesh);

    //Add Object to activeObjects
    Adjust.addActiveObject(mesh, over, out, activeState, false);

    return mesh;
}

function generateCity() {

    var labelHolder = document.createElement('div');
    labelHolder.classList.add('labels');

    var optionsHolder = document.createElement('div');
    optionsHolder.classList.add('options');

    tiles.forEach(function(tile, index) {
        optionsHolder.appendChild(createOptions(tile));
    });


    // Create Models

    // for(var p=0;p<gridPositions.length;p++){
    //   addSingleTile({
    //     obj : 'gras',
    //     coor : p,
    //     rot : randomRotation()
    //   });

    // }

    places.forEach(function(obj, index) {
        addSingleTile(obj);
        labelHolder.appendChild(createLabel(obj.coor, obj.coor));

    });
    document.body.appendChild(labelHolder);
    infoHolder.appendChild(optionsHolder);

    Adjust.addLabel('label');
}

///////////////////////////////// Create GridPositions



var gridPositions = createGrid(dimension, offset);



//__________ resize

window.onresize = function() {

    canvas_width = backHolder.offsetWidth;
    canvas_height = backHolder.offsetHeight;

    camera.aspect = canvas_width / canvas_height;
    camera.updateProjectionMatrix();
    renderer.setSize(canvas_width, canvas_height);


    // Adjust
    Adjust.resize();
}



// Adjust
Adjust.init({
    camera: camera,
    holder: backHolder
});

//__________ controls

controls = new THREE.OrbitControls(camera);

controls.damping = 0.2;
controls.maxPolarAngle = Math.PI / 2;
//controls.minPolarAngle = 1;
controls.minDistance = 5;
controls.maxDistance = 35;


//__________ light
var ambient = new THREE.AmbientLight(0xaaaaaa, 1);
scene.add(ambient);


var spotLight = new THREE.SpotLight(0xffffff);
spotLight.position.set(10, 0, 10);
spotLight.intensity = 1;
spotLight.castShadow = true;
spotLight.shadowMapWidth = 1024;
spotLight.shadowMapHeight = 1024;
spotLight.shadow.camera.near = 1;
spotLight.shadow.camera.far = 5000;
spotLight.shadowBias = -0.0001;
var l = 50;

spotLight.shadow.camera.left = l;
spotLight.shadow.camera.right = -l;
spotLight.shadow.camera.top = l;
spotLight.shadow.camera.bottom = -l;
camera.add(spotLight);



//__________ render
function render(time) {
    requestAnimationFrame(render);
    animation(time);

    controls.update();
    renderer.render(scene, camera);
};

//__________ animation

function animation(time) {
    TWEEN.update(time);
    Adjust.update();
};

//__________

render(time);



//}()); //__eof
</script>

</body>
</html>
      <!-- .entry-content -->
    </article>
      <!-- #post-## -->
      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="/about/" class="profile gravatar"><img src="/images/avatar.jpg" itemprop="image" alt="City" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="http://www.dfinitycity.ml" itemprop="url" rel="author">City</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>Build your internet life from ICity!</p>
      </section>
  </div><!-- #primary -->
</div>
    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>

	<div class="ins-search-container css-1ews2c8">
		<div class=" ins-input-wrapper">
		<div class="ins-search-input">
				<button type="button" class="css-taj3dd">
				<img class="icon-logo" src="https://imgur.com/500HtOG.png"  width="40" height="40"><b>&nbsp;Connect with Plug</b></button>
				<button type="button" class="css-taj3dd">
				<img class="icon-logo" src="https://imgur.com/kWd670K.png"  width="40" height="40"><b>&nbsp;Connect with Stoic</b></button>
				<button type="button" class="css-taj3dd">
				<img class="icon-logo" src="https://imgur.com/MIlKtaH.png" width="40" height="40"><b>&nbsp;Connect with Earth</b></button>
				<span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
		</div>
		</div>
    
	</div>

</div>
<style>
.css-taj3dd {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    outline: transparent solid 2px;
    min-width: var(--chakra-sizes-10);
    font-size: var(--chakra-fontSizes-md);
    background: var(--chakra-colors-gray-100);
    margin: 5px 0!important;
    padding: 4px 16px!important;
    width: 100%!important;
}
.icon-logo {
    height: 150%;
}

</style>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        ROOT_URL: '/',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 John Doe<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">© 2022&nbsp;located in Internet computer  <span id="busuanzi_container_site_pv">total number of visitors:</span>
        </span>
      </p>
    </div>
  </div>
</footer>


<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="/js/botui.js"></script>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/dfinitycity/test/","name":"test.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/dfinitycity/test/","name":"test.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { 
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', 
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', 
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', 
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', 
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', 
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', 
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>

    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://imgur.com/NIK2VV2.png">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">DfinityCity</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/dfinitycity" class="fa fa-github-alt" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://twitter.com/DfinityCity" class="fa fa-twitter-square" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
        <a href="/" class="fa fa-medium" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
	<div id="wallet" class="m-search">
		<button class="btn search-form-submit" >Connect Wallet</button>
	</div>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            Index
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-vertical" aria-hidden="true"></i>
            Art
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/art/gallery/">
                  <i class="fa " aria-hidden="true"></i>
                  Gallery
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  Analysis
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            ICmoe
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/icmoe/collection/">
                  <i class="fa " aria-hidden="true"></i>
                  Collec-tion
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  About
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-shake" aria-hidden="true"></i>
            ICity
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/city/mycity/">
                  <i class="fa " aria-hidden="true"></i>
                  My-city
                </a>
              </li>
            
              <li>
                <a target="_blank" rel="noopener" href="https://qb5bx-iyaaa-aaaai-abmna-cai.ic0.app/">
                  <i class="fa " aria-hidden="true"></i>
                  Land
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  Stake
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  About
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o  faa-tada" aria-hidden="true"></i>
            Update
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  Time-line
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  Road-map
                </a>
              </li>
            
              <li>
                <a href="javascript:;">
                  <i class="fa " aria-hidden="true"></i>
                  About-us
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/portals/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            Portal
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;"> Build your life from here.</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>

<style>
#wallet .btn {
    margin: 0 auto 20px;
    display: block;
    text-align: center;
    font-size: 14px;
    font-family: "Montserrat",sans-serif;
    font-weight: 700;
    padding: 9px 13px!important;
    color: #fff;
    background-color: #e8b72c;
    border-radius: 50px;
    border: 3px solid transparent;
	}
</style>
</body>
</html>